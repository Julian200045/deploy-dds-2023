<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/generalize.css">
    <link rel="stylesheet" href="/css/revision-incidente.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revisión de incidente</title>
</head>
<body>
<div class="header">
    <div class="logo"><img  src="/img/logo.png"></div>
    <h1 class="title">Revisión de incidente</h1>
</div>
<div class="container">
    <div class="table-container">
        <div class="table-title">Datos del incidente</div>
        <div class="table">
            <div class="table-header">Establecimiento</div>
            <div class="table-header">Servicio</div>
            <div class="table-header">Comunidad</div>
            <div class="table-header">Observaciones</div>

            {{#with incidente}}
            <div class="table-row">{{establecimiento}}</div>
            <div class="table-row">{{servicio}}</div>
            <div class="table-row">{{comunidad}}</div>
            <div class="table-row">{{observaciones}}</div>
            {{/with}}
        </div>
    </div>
    <div class="text">
        Por favor, diríjase a la ubicación del incidente para revisar el estado del mismo.
    </div>
    <div class="table-container">
        <div class="table-title">Ubicación</div>
        <div class="table" id="table-ubicacion">
            <div class="table-header">Calle</div>
            <div class="table-header">Altura</div>

            <div class="table-row">{{direccion.calle}}</div>
            <div class="table-row">{{direccion.altura}}</div>
        </div>
    </div>

    <div class="button-container">
        <button onclick="location.href='/inicio'" id="boton-no-resuelto">El incidente no está resuelto</button>
        <button onclick="location.href='/incidentes/{{incidentes.id}}/baja'" id="boton-resuelto">Dar de baja incidente</button>
        <!--button onclick="sendDeleteRequest()"  id="boton-resuelto">Dar de baja incidente</button-->
    </div>
</div>

<script>
    function sendDeleteRequest() {
        // Obtén la URL a la que deseas enviar la solicitud DELETE
        var url = '/baja_incidente/{incidentes.id}';

        // Realiza la solicitud DELETE usando Fetch o XMLHttpRequest
        fetch(url, {
            method: 'DELETE',
            // Puedes incluir más opciones aquí, como headers, body, etc.
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Error al realizar la solicitud DELETE');
            }
            return response.json();
        })
        .then(data => {
            // Maneja la respuesta si es necesario
            console.log(data);
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }
</script>

</body>
</html>